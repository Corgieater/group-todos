//- 通用群組清單 mixin
//- 參數：items = [{id,name}] 或 [{group:{id,name}, role, joinedAt}]
//- 會自動辨識 shape
mixin GroupList(items)
  - const rows = (items || []).map(it => it.group ? it.group : it)

  if !rows.length
    .border.border-2.border-dashed.rounded-3.p-5.text-center.text-muted
      i.bi.bi-people fs-1.d-block.mb-2
      div.mb-2 No groups yet.
      a.btn.btn-sm.btn-primary.mt-2(href="/groups/new") + Create Group
  else
    .table-responsive
      table.table.table-hover.align-middle
        thead
          tr
            th Name
            th.text-end Actions
        tbody
          each g, idx in rows
            tr
              td
                a.text-decoration-none(href=`/groups/${g.id}`)= g.name
              td.text-end
                a.btn.btn-sm.btn-outline-secondary.me-2(href=`/groups/${g.id}`) View
                a.btn.btn-sm.btn-outline-primary(href=`/groups/${g.id}/edit`) Edit
