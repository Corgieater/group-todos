doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1")
    title My Groups
    include ../partials/bootstrap
    // å¼•å…¥ Bootstrap Icons (å¦‚æœå°šæœªåœ¨ bootstrap partial ä¸­åŒ…å«)
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css") 

  body
    // å€å¡Š 1: å°èˆªåˆ— (Navbar)
    include ../partials/header

    // å€å¡Š 2: è¨Šæ¯åŠæ¨™é ­ (Header)
    .container
      include ../partials/message

    // å€å¡Š 3: ä¸»è¦å…§å®¹
    .container.py-4
      
      // --- My Groups å€å¡Š ---
      hr.my-4
      
      // æ¨™é¡ŒåŠæ–°å¢æŒ‰éˆ•
      .hstack.gap-3.justify-content-between.mb-2
        .d-flex.align-items-center.gap-2
          h2.h5.mb-0 ğŸ‘¥ My Groups
          
          // ç¾¤çµ„è¨ˆæ•¸
          - const groupRows = (groups || []).map(it => it?.group ? it.group : it)
          if (groupRows.length)
            span.badge.text-bg-secondary.rounded-pill #{groupRows.length}
        
        // æ–°å¢ç¾¤çµ„æŒ‰éˆ•
        a.btn.btn-sm.btn-primary(href="/groups/new")
          i.bi.bi-plus-lg.me-1
          | New Group

      // --- ç¾¤çµ„æ¸…å–®æ¸²æŸ“é‚è¼¯ (åŸ _list.pug å…§å®¹) ---
      if !groupRows.length
        // ç©ºç‹€æ…‹æç¤º
        .border.border-2.border-dashed.rounded-3.p-5.text-center.text-muted
          i.bi.bi-people.fs-1.d-block.mb-2
          div.mb-2 No groups yet. Create one to get started!
      else
        // ç¾¤çµ„è¡¨æ ¼
        .table-responsive
          table.table.table-hover.align-middle
            caption.visually-hidden List of my groups
            thead
              tr
                th.w-75 Name
                th.text-end Actions
            tbody
              each g, idx in groupRows
                tr
                  // ç¾¤çµ„åç¨± (å¯é»æ“Šé€²å…¥è©³æƒ…)
                  td
                    a.text-decoration-none(href=`/groups/${g.id}`)
                      i.bi.bi-folder2.me-2
                      | #{g.name}
                  
                  // æ“ä½œæŒ‰éˆ•
                  td.text-end
                    a.btn.btn-sm.btn-outline-secondary.me-2(href=`/groups/${g.id}`) 
                      i.bi.bi-eye
                      | View
                    
                    a.btn.btn-sm.btn-outline-success.me-2(href=`/groups/${g.id}/tasks`) 
                      i.bi.bi-list-task
                      | Tasks
                    
                    a.btn.btn-sm.btn-outline-primary(href=`/groups/${g.id}/edit`) 
                      i.bi.bi-pencil
                      | Edit
      
      // --- Task List å€å¡Š (å¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨æ­¤æ·»åŠ ) ---
      // hr.my-4
      // h2.h5.mb-3 My Tasks
      // // ä»»å‹™åˆ—è¡¨å…§å®¹...

    // å¼•å…¥ Bootstrap JS
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js")